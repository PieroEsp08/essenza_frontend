<div class="container py-5 carrito-container">

  <!-- Carrito vacío -->
  <div *ngIf="carrito.length === 0" class="text-center py-5 text-muted">
    <i class="bi bi-cart-x display-1 mb-3 text-secondary"></i>
    <p class="fs-4 fw-light fuente-georgia">Tu carrito está vacío.</p>
  </div>

  <!-- Carrito con productos -->
  <div *ngIf="carrito.length > 0">

    <!-- Cabecera -->
    <div class="row fw-semibold border-bottom pb-3 mb-4 text-uppercase text-dark small fuente-georgia">
      <div class="col-5">Producto</div>
      <div class="col-2 text-center">Precio</div>
      <div class="col-2 text-center">Cantidad</div>
      <div class="col-2 text-center">Subtotal</div>
      <div class="col-1"></div>
    </div>

    <!-- Productos -->
    <div *ngFor="let p of carrito" class="row align-items-center py-3 mb-3 carrito-item rounded-4 shadow-sm bg-light">
      <div class="col-1">
        <img [src]="p.imagenUrl"
             [alt]="p.nombre"
             class="img-fluid rounded-3 border border-light shadow-sm"
             style="max-height: 60px; object-fit: cover;">
      </div>
      <div class="col-4 fw-medium fuente-georgia">
        <span class="text-dark">{{ p.nombre }}</span>
      </div>
      <div class="col-2 text-center">
        <span class="text-secondary fw-semibold fuente-numeros">S/. {{ p.precioActual.toFixed(2) }}</span>
      </div>
      <div class="col-2 text-center">
        <span class="text-secondary fuente-numeros fs-6 px-3 py-2 rounded-pill">{{ p.cantidad }}</span>
      </div>
      <div class="col-2 text-center">
        <span class="text-secondary fw-semibold fuente-numeros">S/. {{ (p.precioActual * p.cantidad).toFixed(2) }}</span>
      </div>
      <div class="col-1 text-center">
        <button class="btn btn-sm btn-outline-danger p-1 shadow-sm" (click)="eliminar(p.id)">
          <i class="bi bi-trash fs-5"></i>
        </button>
      </div>
    </div>

    <!-- Total -->
    <div class="d-flex justify-content-end align-items-center mt-5">
      <h5 class="me-2 fw-normal text-dark fuente-georgia">Total a pagar:</h5>
      <h3 class="fw-bold mb-0 fuente-numeros" style="color: #28a745;">S/. {{ total.toFixed(2) }}</h3>
    </div>

    <!-- Botones -->
    <div class="d-flex justify-content-end gap-3 mt-4">
      <button class="btn btn-confirmar-compra px-4 py-2 rounded-pill shadow-sm d-flex align-items-center" (click)="confirmarCompra()">
        <i class="bi bi-bag-check me-2"></i> Confirmar Compra
      </button>

      <button class="btn btn-outline-dark px-4 py-2 rounded-pill d-flex align-items-center" (click)="cancelarCompra()">
        <i class="bi bi-x-circle me-2"></i> Cancelar
      </button>
    </div>

  </div>
</div>
